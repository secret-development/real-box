<div id="tran-chart" style="width: 560px; height: 300px;">
</div>
<script type="text/javascript" charset="urf-8">
  $(function() {
    new Highcharts.Chart({
      chart: { renderTo: 'tran-chart', backgroundColor: "#F4F4FF"},
      title: { text: 'Месяц'},
      xAxis: { type: 'datetime'},
      yAxis: {
        title: { text: 'Доход'}
      },
      tooltip: {
        formatter: function () {
          return Highcharts.dateFormat("%B %e %Y", this.x) + ': ' + '$' + Highcharts.numberFormat(this.y, 2);
        }  
      },
      series: [{
        name: "$",
        pointInterval: <%= 1.day * 1000 %>,
        pointStart: <%= 4.weeks.ago.at_midnight.to_i * 1000 %>,
        data: <%= (4.weeks.ago.to_date..Date.today).map { |date| Report.total_on(date).to_f}.inspect %>
      }],
    });
  });
</script>
